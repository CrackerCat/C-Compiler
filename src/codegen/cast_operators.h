#ifndef CAST_OPERATORS_H
#define CAST_OPERATORS_H

#include <types.h>

// First index source, second index destination.
const char *cast_operator_outputs[ST_COUNT][ST_COUNT] = {
	[ST_CHAR][ST_CHAR] = "movl\t%edi, %eax\n",
	[ST_CHAR][ST_SCHAR] = "movl\t%edi, %eax\n",
	[ST_CHAR][ST_UCHAR] = "movl\t%edi, %eax\n",
	[ST_CHAR][ST_SHORT] = "movl\t%edi, %eax\n",
	[ST_CHAR][ST_USHORT] = "movl\t%edi, %eax\n",
	[ST_CHAR][ST_INT] = "movl\t%edi, %eax\n",
	[ST_CHAR][ST_UINT] = "movl\t%edi, %eax\n",
	[ST_CHAR][ST_LONG] = "movl\t%edi, %eax\n",
	[ST_CHAR][ST_ULONG] = "movl\t%edi, %eax\n",
	[ST_CHAR][ST_LLONG] = "movl\t%edi, %eax\n",
	[ST_CHAR][ST_ULLONG] = "movl\t%edi, %eax\n",
	[ST_CHAR][ST_FLOAT] = "cvttss2sil\t%xmm0, %eax\n",
	[ST_CHAR][ST_DOUBLE] = "cvttsd2sil\t%xmm0, %eax\n",
	[ST_CHAR][ST_LDOUBLE] = "cvttsd2sil\t%xmm0, %eax\n",
	[ST_CHAR][ST_BOOL] = "movl\t%edi, %eax\n",
	[ST_SCHAR][ST_CHAR] = "movl\t%edi, %eax\n",
	[ST_SCHAR][ST_SCHAR] = "movl\t%edi, %eax\n",
	[ST_SCHAR][ST_UCHAR] = "movl\t%edi, %eax\n",
	[ST_SCHAR][ST_SHORT] = "movl\t%edi, %eax\n",
	[ST_SCHAR][ST_USHORT] = "movl\t%edi, %eax\n",
	[ST_SCHAR][ST_INT] = "movl\t%edi, %eax\n",
	[ST_SCHAR][ST_UINT] = "movl\t%edi, %eax\n",
	[ST_SCHAR][ST_LONG] = "movl\t%edi, %eax\n",
	[ST_SCHAR][ST_ULONG] = "movl\t%edi, %eax\n",
	[ST_SCHAR][ST_LLONG] = "movl\t%edi, %eax\n",
	[ST_SCHAR][ST_ULLONG] = "movl\t%edi, %eax\n",
	[ST_SCHAR][ST_FLOAT] = "cvttss2sil\t%xmm0, %eax\n",
	[ST_SCHAR][ST_DOUBLE] = "cvttsd2sil\t%xmm0, %eax\n",
	[ST_SCHAR][ST_LDOUBLE] = "cvttsd2sil\t%xmm0, %eax\n",
	[ST_SCHAR][ST_BOOL] = "movl\t%edi, %eax\n",
	[ST_UCHAR][ST_CHAR] = "movl\t%edi, %eax\n",
	[ST_UCHAR][ST_SCHAR] = "movl\t%edi, %eax\n",
	[ST_UCHAR][ST_UCHAR] = "movl\t%edi, %eax\n",
	[ST_UCHAR][ST_SHORT] = "movl\t%edi, %eax\n",
	[ST_UCHAR][ST_USHORT] = "movl\t%edi, %eax\n",
	[ST_UCHAR][ST_INT] = "movl\t%edi, %eax\n",
	[ST_UCHAR][ST_UINT] = "movl\t%edi, %eax\n",
	[ST_UCHAR][ST_LONG] = "movl\t%edi, %eax\n",
	[ST_UCHAR][ST_ULONG] = "movl\t%edi, %eax\n",
	[ST_UCHAR][ST_LLONG] = "movl\t%edi, %eax\n",
	[ST_UCHAR][ST_ULLONG] = "movl\t%edi, %eax\n",
	[ST_UCHAR][ST_FLOAT] = "cvttss2sil\t%xmm0, %eax\n",
	[ST_UCHAR][ST_DOUBLE] = "cvttsd2sil\t%xmm0, %eax\n",
	[ST_UCHAR][ST_LDOUBLE] = "cvttsd2sil\t%xmm0, %eax\n",
	[ST_UCHAR][ST_BOOL] = "movl\t%edi, %eax\n",
	[ST_SHORT][ST_CHAR] = "movsbw\t%dil, %ax\n",
	[ST_SHORT][ST_SCHAR] = "movsbw\t%dil, %ax\n",
	[ST_SHORT][ST_UCHAR] = "movzbl\t%dil, %eax\n",
	[ST_SHORT][ST_SHORT] = "movl\t%edi, %eax\n",
	[ST_SHORT][ST_USHORT] = "movl\t%edi, %eax\n",
	[ST_SHORT][ST_INT] = "movl\t%edi, %eax\n",
	[ST_SHORT][ST_UINT] = "movl\t%edi, %eax\n",
	[ST_SHORT][ST_LONG] = "movl\t%edi, %eax\n",
	[ST_SHORT][ST_ULONG] = "movl\t%edi, %eax\n",
	[ST_SHORT][ST_LLONG] = "movl\t%edi, %eax\n",
	[ST_SHORT][ST_ULLONG] = "movl\t%edi, %eax\n",
	[ST_SHORT][ST_FLOAT] = "cvttss2sil\t%xmm0, %eax\n",
	[ST_SHORT][ST_DOUBLE] = "cvttsd2sil\t%xmm0, %eax\n",
	[ST_SHORT][ST_LDOUBLE] = "cvttsd2sil\t%xmm0, %eax\n",
	[ST_SHORT][ST_BOOL] = "movzbl\t%dil, %eax\n",
	[ST_USHORT][ST_CHAR] = "movsbw\t%dil, %ax\n",
	[ST_USHORT][ST_SCHAR] = "movsbw\t%dil, %ax\n",
	[ST_USHORT][ST_UCHAR] = "movzbl\t%dil, %eax\n",
	[ST_USHORT][ST_SHORT] = "movl\t%edi, %eax\n",
	[ST_USHORT][ST_USHORT] = "movl\t%edi, %eax\n",
	[ST_USHORT][ST_INT] = "movl\t%edi, %eax\n",
	[ST_USHORT][ST_UINT] = "movl\t%edi, %eax\n",
	[ST_USHORT][ST_LONG] = "movl\t%edi, %eax\n",
	[ST_USHORT][ST_ULONG] = "movl\t%edi, %eax\n",
	[ST_USHORT][ST_LLONG] = "movl\t%edi, %eax\n",
	[ST_USHORT][ST_ULLONG] = "movl\t%edi, %eax\n",
	[ST_USHORT][ST_FLOAT] = "cvttss2sil\t%xmm0, %eax\n",
	[ST_USHORT][ST_DOUBLE] = "cvttsd2sil\t%xmm0, %eax\n",
	[ST_USHORT][ST_LDOUBLE] = "cvttsd2sil\t%xmm0, %eax\n",
	[ST_USHORT][ST_BOOL] = "movzbl\t%dil, %eax\n",
	[ST_INT][ST_CHAR] = "movsbl\t%dil, %eax\n",
	[ST_INT][ST_SCHAR] = "movsbl\t%dil, %eax\n",
	[ST_INT][ST_UCHAR] = "movzbl\t%dil, %eax\n",
	[ST_INT][ST_SHORT] = "movswl\t%di, %eax\n",
	[ST_INT][ST_USHORT] = "movzwl\t%di, %eax\n",
	[ST_INT][ST_INT] = "movl\t%edi, %eax\n",
	[ST_INT][ST_UINT] = "movl\t%edi, %eax\n",
	[ST_INT][ST_LONG] = "movl\t%edi, %eax\n",
	[ST_INT][ST_ULONG] = "movl\t%edi, %eax\n",
	[ST_INT][ST_LLONG] = "movl\t%edi, %eax\n",
	[ST_INT][ST_ULLONG] = "movl\t%edi, %eax\n",
	[ST_INT][ST_FLOAT] = "cvttss2sil\t%xmm0, %eax\n",
	[ST_INT][ST_DOUBLE] = "cvttsd2sil\t%xmm0, %eax\n",
	[ST_INT][ST_LDOUBLE] = "cvttsd2sil\t%xmm0, %eax\n",
	[ST_INT][ST_BOOL] = "movzbl\t%dil, %eax\n",
	[ST_UINT][ST_CHAR] = "movsbl\t%dil, %eax\n",
	[ST_UINT][ST_SCHAR] = "movsbl\t%dil, %eax\n",
	[ST_UINT][ST_UCHAR] = "movzbl\t%dil, %eax\n",
	[ST_UINT][ST_SHORT] = "movswl\t%di, %eax\n",
	[ST_UINT][ST_USHORT] = "movzwl\t%di, %eax\n",
	[ST_UINT][ST_INT] = "movl\t%edi, %eax\n",
	[ST_UINT][ST_UINT] = "movl\t%edi, %eax\n",
	[ST_UINT][ST_LONG] = "movl\t%edi, %eax\n",
	[ST_UINT][ST_ULONG] = "movl\t%edi, %eax\n",
	[ST_UINT][ST_LLONG] = "movl\t%edi, %eax\n",
	[ST_UINT][ST_ULLONG] = "movl\t%edi, %eax\n",
	[ST_UINT][ST_FLOAT] = "cvttss2siq\t%xmm0, %rax\n",
	[ST_UINT][ST_DOUBLE] = "cvttsd2siq\t%xmm0, %rax\n",
	[ST_UINT][ST_LDOUBLE] = "cvttsd2siq\t%xmm0, %rax\n",
	[ST_UINT][ST_BOOL] = "movzbl\t%dil, %eax\n",
	[ST_LONG][ST_CHAR] = "movsbq\t%dil, %rax\n",
	[ST_LONG][ST_SCHAR] = "movsbq\t%dil, %rax\n",
	[ST_LONG][ST_UCHAR] = "movzbl\t%dil, %eax\n",
	[ST_LONG][ST_SHORT] = "movswq\t%di, %rax\n",
	[ST_LONG][ST_USHORT] = "movzwl\t%di, %eax\n",
	[ST_LONG][ST_INT] = "movslq\t%edi, %rax\n",
	[ST_LONG][ST_UINT] = "movl\t%edi, %eax\n",
	[ST_LONG][ST_LONG] = "movq\t%rdi, %rax\n",
	[ST_LONG][ST_ULONG] = "movq\t%rdi, %rax\n",
	[ST_LONG][ST_LLONG] = "movq\t%rdi, %rax\n",
	[ST_LONG][ST_ULLONG] = "movq\t%rdi, %rax\n",
	[ST_LONG][ST_FLOAT] = "cvttss2siq\t%xmm0, %rax\n",
	[ST_LONG][ST_DOUBLE] = "cvttsd2siq\t%xmm0, %rax\n",
	[ST_LONG][ST_LDOUBLE] = "cvttsd2siq\t%xmm0, %rax\n",
	[ST_LONG][ST_BOOL] = "movzbl\t%dil, %eax\n",
	[ST_ULONG][ST_CHAR] = "movsbq\t%dil, %rax\n",
	[ST_ULONG][ST_SCHAR] = "movsbq\t%dil, %rax\n",
	[ST_ULONG][ST_UCHAR] = "movzbl\t%dil, %eax\n",
	[ST_ULONG][ST_SHORT] = "movswq\t%di, %rax\n",
	[ST_ULONG][ST_USHORT] = "movzwl\t%di, %eax\n",
	[ST_ULONG][ST_INT] = "movslq\t%edi, %rax\n",
	[ST_ULONG][ST_UINT] = "movl\t%edi, %eax\n",
	[ST_ULONG][ST_LONG] = "movq\t%rdi, %rax\n",
	[ST_ULONG][ST_ULONG] = "movq\t%rdi, %rax\n",
	[ST_ULONG][ST_LLONG] = "movq\t%rdi, %rax\n",
	[ST_ULONG][ST_ULLONG] = "movq\t%rdi, %rax\n",
	[ST_ULONG][ST_FLOAT] = "cvttss2siq\t%xmm0, %rax\n",
	[ST_ULONG][ST_DOUBLE] = "comisd\t%xmm1, %xmm0\n\tcvttsd2siq\t%xmm0, %rax\n",
	[ST_ULONG][ST_LDOUBLE] = "comisd\t%xmm1, %xmm0\n\tcvttsd2siq\t%xmm0, %rax\n",
	[ST_ULONG][ST_BOOL] = "movzbl\t%dil, %eax\n",
	[ST_LLONG][ST_CHAR] = "movsbq\t%dil, %rax\n",
	[ST_LLONG][ST_SCHAR] = "movsbq\t%dil, %rax\n",
	[ST_LLONG][ST_UCHAR] = "movzbl\t%dil, %eax\n",
	[ST_LLONG][ST_SHORT] = "movswq\t%di, %rax\n",
	[ST_LLONG][ST_USHORT] = "movzwl\t%di, %eax\n",
	[ST_LLONG][ST_INT] = "movslq\t%edi, %rax\n",
	[ST_LLONG][ST_UINT] = "movl\t%edi, %eax\n",
	[ST_LLONG][ST_LONG] = "movq\t%rdi, %rax\n",
	[ST_LLONG][ST_ULONG] = "movq\t%rdi, %rax\n",
	[ST_LLONG][ST_LLONG] = "movq\t%rdi, %rax\n",
	[ST_LLONG][ST_ULLONG] = "movq\t%rdi, %rax\n",
	[ST_LLONG][ST_FLOAT] = "cvttss2siq\t%xmm0, %rax\n",
	[ST_LLONG][ST_DOUBLE] = "cvttsd2siq\t%xmm0, %rax\n",
	[ST_LLONG][ST_LDOUBLE] = "cvttsd2siq\t%xmm0, %rax\n",
	[ST_LLONG][ST_BOOL] = "movzbl\t%dil, %eax\n",
	[ST_ULLONG][ST_CHAR] = "movsbq\t%dil, %rax\n",
	[ST_ULLONG][ST_SCHAR] = "movsbq\t%dil, %rax\n",
	[ST_ULLONG][ST_UCHAR] = "movzbl\t%dil, %eax\n",
	[ST_ULLONG][ST_SHORT] = "movswq\t%di, %rax\n",
	[ST_ULLONG][ST_USHORT] = "movzwl\t%di, %eax\n",
	[ST_ULLONG][ST_INT] = "movslq\t%edi, %rax\n",
	[ST_ULLONG][ST_UINT] = "movl\t%edi, %eax\n",
	[ST_ULLONG][ST_LONG] = "movq\t%rdi, %rax\n",
	[ST_ULLONG][ST_ULONG] = "movq\t%rdi, %rax\n",
	[ST_ULLONG][ST_LLONG] = "movq\t%rdi, %rax\n",
	[ST_ULLONG][ST_ULLONG] = "movq\t%rdi, %rax\n",
	[ST_ULLONG][ST_FLOAT] = "cvttss2siq\t%xmm0, %rax\n",
	[ST_ULLONG][ST_DOUBLE] = "comisd\t%xmm1, %xmm0\n\tcvttsd2siq\t%xmm0, %rax\n",
	[ST_ULLONG][ST_LDOUBLE] = "comisd\t%xmm1, %xmm0\n\tcvttsd2siq\t%xmm0, %rax\n",
	[ST_ULLONG][ST_BOOL] = "movzbl\t%dil, %eax\n",
	[ST_FLOAT][ST_CHAR] = "movsbl\t%dil, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2ssl\t%edi, %xmm0\n",
	[ST_FLOAT][ST_SCHAR] = "movsbl\t%dil, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2ssl\t%edi, %xmm0\n",
	[ST_FLOAT][ST_UCHAR] = "movzbl\t%dil, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2ssl\t%edi, %xmm0\n",
	[ST_FLOAT][ST_SHORT] = "movswl\t%di, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2ssl\t%edi, %xmm0\n",
	[ST_FLOAT][ST_USHORT] = "movzwl\t%di, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2ssl\t%edi, %xmm0\n",
	[ST_FLOAT][ST_INT] = "pxor\t%xmm0, %xmm0\n\tcvtsi2ssl\t%edi, %xmm0\n",
	[ST_FLOAT][ST_UINT] = "movl\t%edi, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2ssq\t%rdi, %xmm0\n",
	[ST_FLOAT][ST_LONG] = "pxor\t%xmm0, %xmm0\n\tcvtsi2ssq\t%rdi, %xmm0\n",
	[ST_FLOAT][ST_ULONG] = "testq\t%rdi, %rdi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2ssq\t%rdi, %xmm0\n",
	[ST_FLOAT][ST_LLONG] = "pxor\t%xmm0, %xmm0\n\tcvtsi2ssq\t%rdi, %xmm0\n",
	[ST_FLOAT][ST_ULLONG] = "testq\t%rdi, %rdi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2ssq\t%rdi, %xmm0\n",
	[ST_FLOAT][ST_FLOAT] = "",
	[ST_FLOAT][ST_DOUBLE] = "cvtsd2ss\t%xmm0, %xmm0\n",
	[ST_FLOAT][ST_LDOUBLE] = "cvtsd2ss\t%xmm0, %xmm0\n",
	[ST_FLOAT][ST_BOOL] = "movzbl\t%dil, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2ssl\t%edi, %xmm0\n",
	[ST_DOUBLE][ST_CHAR] = "movsbl\t%dil, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdl\t%edi, %xmm0\n",
	[ST_DOUBLE][ST_SCHAR] = "movsbl\t%dil, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdl\t%edi, %xmm0\n",
	[ST_DOUBLE][ST_UCHAR] = "movzbl\t%dil, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdl\t%edi, %xmm0\n",
	[ST_DOUBLE][ST_SHORT] = "movswl\t%di, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdl\t%edi, %xmm0\n",
	[ST_DOUBLE][ST_USHORT] = "movzwl\t%di, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdl\t%edi, %xmm0\n",
	[ST_DOUBLE][ST_INT] = "pxor\t%xmm0, %xmm0\n\tcvtsi2sdl\t%edi, %xmm0\n",
	[ST_DOUBLE][ST_UINT] = "movl\t%edi, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdq\t%rdi, %xmm0\n",
	[ST_DOUBLE][ST_LONG] = "pxor\t%xmm0, %xmm0\n\tcvtsi2sdq\t%rdi, %xmm0\n",
	[ST_DOUBLE][ST_ULONG] = "testq\t%rdi, %rdi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdq\t%rdi, %xmm0\n",
	[ST_DOUBLE][ST_LLONG] = "pxor\t%xmm0, %xmm0\n\tcvtsi2sdq\t%rdi, %xmm0\n",
	[ST_DOUBLE][ST_ULLONG] = "testq\t%rdi, %rdi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdq\t%rdi, %xmm0\n",
	[ST_DOUBLE][ST_FLOAT] = "cvtss2sd\t%xmm0, %xmm0\n",
	[ST_DOUBLE][ST_DOUBLE] = "",
	[ST_DOUBLE][ST_LDOUBLE] = "",
	[ST_DOUBLE][ST_BOOL] = "movzbl\t%dil, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdl\t%edi, %xmm0\n",
	[ST_LDOUBLE][ST_CHAR] = "movsbl\t%dil, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdl\t%edi, %xmm0\n",
	[ST_LDOUBLE][ST_SCHAR] = "movsbl\t%dil, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdl\t%edi, %xmm0\n",
	[ST_LDOUBLE][ST_UCHAR] = "movzbl\t%dil, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdl\t%edi, %xmm0\n",
	[ST_LDOUBLE][ST_SHORT] = "movswl\t%di, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdl\t%edi, %xmm0\n",
	[ST_LDOUBLE][ST_USHORT] = "movzwl\t%di, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdl\t%edi, %xmm0\n",
	[ST_LDOUBLE][ST_INT] = "pxor\t%xmm0, %xmm0\n\tcvtsi2sdl\t%edi, %xmm0\n",
	[ST_LDOUBLE][ST_UINT] = "movl\t%edi, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdq\t%rdi, %xmm0\n",
	[ST_LDOUBLE][ST_LONG] = "pxor\t%xmm0, %xmm0\n\tcvtsi2sdq\t%rdi, %xmm0\n",
	[ST_LDOUBLE][ST_ULONG] = "testq\t%rdi, %rdi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdq\t%rdi, %xmm0\n",
	[ST_LDOUBLE][ST_LLONG] = "pxor\t%xmm0, %xmm0\n\tcvtsi2sdq\t%rdi, %xmm0\n",
	[ST_LDOUBLE][ST_ULLONG] = "testq\t%rdi, %rdi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdq\t%rdi, %xmm0\n",
	[ST_LDOUBLE][ST_FLOAT] = "cvtss2sd\t%xmm0, %xmm0\n",
	[ST_LDOUBLE][ST_DOUBLE] = "",
	[ST_LDOUBLE][ST_LDOUBLE] = "",
	[ST_LDOUBLE][ST_BOOL] = "movzbl\t%dil, %edi\n\tpxor\t%xmm0, %xmm0\n\tcvtsi2sdl\t%edi, %xmm0\n",
	[ST_BOOL][ST_CHAR] = "testb\t%dil, %dil\n\tsetne\t%al\n",
	[ST_BOOL][ST_SCHAR] = "testb\t%dil, %dil\n\tsetne\t%al\n",
	[ST_BOOL][ST_UCHAR] = "testb\t%dil, %dil\n\tsetne\t%al\n",
	[ST_BOOL][ST_SHORT] = "testw\t%di, %di\n\tsetne\t%al\n",
	[ST_BOOL][ST_USHORT] = "testw\t%di, %di\n\tsetne\t%al\n",
	[ST_BOOL][ST_INT] = "testl\t%edi, %edi\n\tsetne\t%al\n",
	[ST_BOOL][ST_UINT] = "testl\t%edi, %edi\n\tsetne\t%al\n",
	[ST_BOOL][ST_LONG] = "testq\t%rdi, %rdi\n\tsetne\t%al\n",
	[ST_BOOL][ST_ULONG] = "testq\t%rdi, %rdi\n\tsetne\t%al\n",
	[ST_BOOL][ST_LLONG] = "testq\t%rdi, %rdi\n\tsetne\t%al\n",
	[ST_BOOL][ST_ULLONG] = "testq\t%rdi, %rdi\n\tsetne\t%al\n",
	[ST_BOOL][ST_FLOAT] = "movl\t$1, %edx\n\tsetp\t%al\n\tcmovne\t%edx, %eax\n",
	[ST_BOOL][ST_DOUBLE] = "movl\t$1, %edx\n\tsetp\t%al\n\tcmovne\t%edx, %eax\n",
	[ST_BOOL][ST_LDOUBLE] = "movl\t$1, %edx\n\tsetp\t%al\n\tcmovne\t%edx, %eax\n",
	[ST_BOOL][ST_BOOL] = "movl\t%edi, %eax\n",
};

#endif
